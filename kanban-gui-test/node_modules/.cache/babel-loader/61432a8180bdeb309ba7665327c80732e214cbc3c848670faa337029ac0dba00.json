{"ast":null,"code":"var _jsxFileName = \"/Users/ralf/PyPrograms/KanbanFlow-Web/kanban-gui-test/src/components/FlyingCardAnimation.js\",\n  _s = $RefreshSig$();\n// src/components/FlyingCardAnimation.js\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FlyingCardAnimation = ({\n  card,\n  startRect,\n  endRect,\n  onAnimationEnd\n}) => {\n  _s();\n  const animatedRef = useRef(null); // Ref for the DOM element that will be animated\n  const animationInstanceRef = useRef(null); // Ref to store the Web Animation object\n\n  // useEffect to trigger the animation once all necessary data (startRect, endRect) is available\n  useEffect(() => {\n    // We only proceed if the DOM element is mounted and we have both start and end positions.\n    // The component will render initially with just startRect, waiting for endRect.\n    if (!animatedRef.current || !startRect || !endRect) {\n      // console.log(`[FlyingCardAnimation] Card ${card.id}: Waiting for all props (ref, start, end) to start animation.`);\n      return;\n    }\n\n    // Calculate the translation needed from startRect to endRect\n    const deltaX = endRect.left - startRect.left;\n    const deltaY = endRect.top - startRect.top;\n\n    // Define the animation keyframes: start (translate 0,0) and end (translate to delta)\n    const keyframes = [{\n      transform: 'translate(0, 0)',\n      opacity: 1\n    }, {\n      transform: `translate(${deltaX}px, ${deltaY}px)`,\n      opacity: 1\n    }];\n\n    // Define animation options (duration, easing, and fill)\n    const options = {\n      duration: 500,\n      // Animation duration in milliseconds (can be changed)\n      easing: 'ease-in-out',\n      // Smooth start and end\n      fill: 'forwards' // Keep the end state of the animation\n    };\n\n    // Create and start the Web Animation\n    animationInstanceRef.current = animatedRef.current.animate(keyframes, options);\n\n    // Use the Promise-based `finished` property for more reliable completion detection.\n    // This promise resolves when the animation completes naturally or is cancelled.\n    animationInstanceRef.current.finished.then(() => {\n      console.log(`[FlyingCardAnimation] Promise-based animation finished for card: ${card.id}`); // Debugging log\n      onAnimationEnd(card.id); // Call the parent's handler to remove this animation entry\n    }).catch(error => {\n      // Handle cases where the animation might be cancelled (e.g., component unmounts before finishing)\n      if (error.name === 'AbortError') {\n        console.log(`[FlyingCardAnimation] Card ${card.id}: Animation was cancelled.`);\n      } else {\n        console.error(`[FlyingCardAnimation] Card ${card.id}: Animation error:`, error);\n      }\n    });\n\n    // Cleanup function: This runs when the component unmounts or before the effect re-runs.\n    return () => {\n      if (animationInstanceRef.current) {\n        animationInstanceRef.current.cancel(); // Cancel the animation to prevent memory leaks or errors\n      }\n    };\n  }, [card.id, startRect, endRect, onAnimationEnd]); // Dependencies: re-run if these values change\n\n  // This is the ONLY return block for the component.\n  // It renders the clone at its starting position, ready to be animated.\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: animatedRef,\n    className: \"bg-white p-4 mb-3 rounded shadow-md pointer-events-none\" // pointer-events-none prevents it from capturing mouse events\n    ,\n    style: {\n      position: 'fixed',\n      // Position relative to the viewport\n      left: startRect ? startRect.left : 0,\n      // Set initial position from startRect\n      top: startRect ? startRect.top : 0,\n      width: startRect ? startRect.width : 0,\n      height: startRect ? startRect.height : 0,\n      zIndex: 1000,\n      // Ensure it's on top of other content\n      opacity: startRect ? 1 : 0 // Start fully opaque if startRect is available\n    },\n    children: card.birth_id ? `Card ${card.birth_id}` : card.id\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(FlyingCardAnimation, \"w/TLPhCrXeBNU/fiGHfy6XXZLuo=\");\n_c = FlyingCardAnimation;\nexport default FlyingCardAnimation;\nvar _c;\n$RefreshReg$(_c, \"FlyingCardAnimation\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","FlyingCardAnimation","card","startRect","endRect","onAnimationEnd","_s","animatedRef","animationInstanceRef","current","deltaX","left","deltaY","top","keyframes","transform","opacity","options","duration","easing","fill","animate","finished","then","console","log","id","catch","error","name","cancel","ref","className","style","position","width","height","zIndex","children","birth_id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ralf/PyPrograms/KanbanFlow-Web/kanban-gui-test/src/components/FlyingCardAnimation.js"],"sourcesContent":["// src/components/FlyingCardAnimation.js\nimport React, { useEffect, useRef, useState } from 'react';\n\nconst FlyingCardAnimation = ({ card, startRect, endRect, onAnimationEnd }) => {\n  const animatedRef = useRef(null); // Ref for the DOM element that will be animated\n  const animationInstanceRef = useRef(null); // Ref to store the Web Animation object\n\n  // useEffect to trigger the animation once all necessary data (startRect, endRect) is available\n  useEffect(() => {\n    // We only proceed if the DOM element is mounted and we have both start and end positions.\n    // The component will render initially with just startRect, waiting for endRect.\n    if (!animatedRef.current || !startRect || !endRect) {\n        // console.log(`[FlyingCardAnimation] Card ${card.id}: Waiting for all props (ref, start, end) to start animation.`);\n        return;\n    }\n\n    // Calculate the translation needed from startRect to endRect\n    const deltaX = endRect.left - startRect.left;\n    const deltaY = endRect.top - startRect.top;\n\n    // Define the animation keyframes: start (translate 0,0) and end (translate to delta)\n    const keyframes = [\n      { transform: 'translate(0, 0)', opacity: 1 },\n      { transform: `translate(${deltaX}px, ${deltaY}px)`, opacity: 1 },\n    ];\n\n    // Define animation options (duration, easing, and fill)\n    const options = {\n      duration: 500, // Animation duration in milliseconds (can be changed)\n      easing: 'ease-in-out', // Smooth start and end\n      fill: 'forwards', // Keep the end state of the animation\n    };\n\n    // Create and start the Web Animation\n    animationInstanceRef.current = animatedRef.current.animate(keyframes, options);\n\n    // Use the Promise-based `finished` property for more reliable completion detection.\n    // This promise resolves when the animation completes naturally or is cancelled.\n    animationInstanceRef.current.finished.then(() => {\n      console.log(`[FlyingCardAnimation] Promise-based animation finished for card: ${card.id}`); // Debugging log\n      onAnimationEnd(card.id); // Call the parent's handler to remove this animation entry\n    }).catch(error => {\n      // Handle cases where the animation might be cancelled (e.g., component unmounts before finishing)\n      if (error.name === 'AbortError') {\n        console.log(`[FlyingCardAnimation] Card ${card.id}: Animation was cancelled.`);\n      } else {\n        console.error(`[FlyingCardAnimation] Card ${card.id}: Animation error:`, error);\n      }\n    });\n\n    // Cleanup function: This runs when the component unmounts or before the effect re-runs.\n    return () => {\n      if (animationInstanceRef.current) {\n        animationInstanceRef.current.cancel(); // Cancel the animation to prevent memory leaks or errors\n      }\n    };\n  }, [card.id, startRect, endRect, onAnimationEnd]); // Dependencies: re-run if these values change\n\n  // This is the ONLY return block for the component.\n  // It renders the clone at its starting position, ready to be animated.\n  return (\n    <div\n      ref={animatedRef}\n      className=\"bg-white p-4 mb-3 rounded shadow-md pointer-events-none\" // pointer-events-none prevents it from capturing mouse events\n      style={{\n        position: 'fixed', // Position relative to the viewport\n        left: startRect ? startRect.left : 0, // Set initial position from startRect\n        top: startRect ? startRect.top : 0,\n        width: startRect ? startRect.width : 0,\n        height: startRect ? startRect.height : 0,\n        zIndex: 1000, // Ensure it's on top of other content\n        opacity: startRect ? 1 : 0, // Start fully opaque if startRect is available\n      }}\n    >\n      {/* Display card text (use birth_id for readability, fall back to id) */}\n      {card.birth_id ? `Card ${card.birth_id}` : card.id}\n    </div>\n  );\n};\n\nexport default FlyingCardAnimation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}