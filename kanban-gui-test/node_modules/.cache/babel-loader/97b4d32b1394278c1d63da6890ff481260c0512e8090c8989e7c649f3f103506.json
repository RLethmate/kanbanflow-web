{"ast":null,"code":"var _jsxFileName = \"/Users/ralf/PyPrograms/KanbanFlow-Web/kanban-gui-test/src/components/FlyingCardAnimation.js\",\n  _s = $RefreshSig$();\n// kanban-gui-test/src/components/FlyingCardAnimation.js\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FlyingCardAnimation = ({\n  card,\n  startRect,\n  endRect,\n  onAnimationEnd\n}) => {\n  _s();\n  const animatedRef = useRef(null);\n  const animationInstanceRef = useRef(null);\n  useEffect(() => {\n    if (!animatedRef.current || !startRect || !endRect) {\n      return;\n    }\n    if (animationInstanceRef.current) {\n      return;\n    }\n    console.log(`[FlyingCardAnimation] Karte ${card.id}: Starting animation from (${startRect.left},${startRect.top}) to (${endRect.left},${endRect.top})`);\n    const deltaX = endRect.left - startRect.left;\n    const deltaY = endRect.top - startRect.top;\n    const keyframes = [{\n      transform: 'translate(0, 0)',\n      opacity: 1\n    }, {\n      transform: `translate(${deltaX}px, ${deltaY}px)`,\n      opacity: 1\n    }];\n    const options = {\n      duration: 500,\n      easing: 'ease-in-out',\n      fill: 'forwards'\n    };\n    animationInstanceRef.current = animatedRef.current.animate(keyframes, options);\n    animationInstanceRef.current.finished.then(() => {\n      console.log(`[FlyingCardAnimation] Promise-based animation finished for Karte: ${card.id}`);\n      onAnimationEnd(card.id);\n    }).catch(error => {\n      if (error.name === 'AbortError') {\n        console.log(`[FlyingCardAnimation] Karte ${card.id}: Animation was cancelled.`);\n      } else {\n        console.error(`[FlyingCardAnimation] Karte ${card.id}: Animation error:`, error);\n      }\n    });\n    const fallbackTimeout = setTimeout(() => {\n      if (animationInstanceRef.current && animationInstanceRef.current.playState !== 'finished' && animationInstanceRef.current.playState !== 'idle') {\n        console.warn(`[FlyingCardAnimation] Fallback: Animation for Karte ${card.id} did not finish (playState: ${animationInstanceRef.current.playState}). Forcing cleanup.`);\n        onAnimationEnd(card.id);\n        animationInstanceRef.current.cancel();\n      }\n    }, options.duration + 200);\n    return () => {\n      if (animationInstanceRef.current) {\n        animationInstanceRef.current.cancel();\n      }\n      clearTimeout(fallbackTimeout);\n    };\n  }, [card.id, startRect, endRect, onAnimationEnd]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: animatedRef\n    // CRITICAL CHANGE: Remove conflicting Tailwind classes like p-4, mb-3.\n    // Keep only essential visual (non-sizing/non-text) classes.\n    // bg-white, rounded, shadow-md are okay.\n    ,\n    className: \"bg-white rounded shadow-md pointer-events-none\" // Removed p-4, mb-3\n    ,\n    style: {\n      position: 'fixed',\n      left: startRect ? startRect.left : 0,\n      top: startRect ? startRect.top : 0,\n      // CRITICAL: Ensure width and height are from startRect for the clone's initial size\n      width: startRect ? startRect.width : 0,\n      // Apply width from startRect\n      height: startRect ? startRect.height : 0,\n      // Apply height from startRect\n      zIndex: 1000,\n      opacity: startRect ? 1 : 0,\n      // Start opaque if startRect is available\n      // Manually apply padding, font size, and text wrapping rules here to match the resting card\n      padding: '4px 6px',\n      // Matches the Card component's padding\n      fontSize: '0.75rem',\n      // Matches the Card component's font size\n      textAlign: 'center',\n      // Center text\n      display: 'flex',\n      // Use flexbox for centering content\n      justifyContent: 'center',\n      // Center horizontally\n      alignItems: 'center',\n      // Center vertically\n      whiteSpace: 'nowrap',\n      // Prevent text wrapping (fixes carriage return)\n      overflow: 'hidden',\n      // Hide text that overflows\n      textOverflow: 'ellipsis' // Add \"...\" for hidden text (optional, but good UX)\n    },\n    children: card.birth_id ? `Karte ${card.birth_id}` : card.id\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(FlyingCardAnimation, \"w/TLPhCrXeBNU/fiGHfy6XXZLuo=\");\n_c = FlyingCardAnimation;\nexport default FlyingCardAnimation;\nvar _c;\n$RefreshReg$(_c, \"FlyingCardAnimation\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","FlyingCardAnimation","card","startRect","endRect","onAnimationEnd","_s","animatedRef","animationInstanceRef","current","console","log","id","left","top","deltaX","deltaY","keyframes","transform","opacity","options","duration","easing","fill","animate","finished","then","catch","error","name","fallbackTimeout","setTimeout","playState","warn","cancel","clearTimeout","ref","className","style","position","width","height","zIndex","padding","fontSize","textAlign","display","justifyContent","alignItems","whiteSpace","overflow","textOverflow","children","birth_id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ralf/PyPrograms/KanbanFlow-Web/kanban-gui-test/src/components/FlyingCardAnimation.js"],"sourcesContent":["// kanban-gui-test/src/components/FlyingCardAnimation.js\n\nimport React, { useEffect, useRef, useState } from 'react';\n\nconst FlyingCardAnimation = ({ card, startRect, endRect, onAnimationEnd }) => {\n  const animatedRef = useRef(null);\n  const animationInstanceRef = useRef(null);\n\n  useEffect(() => {\n    if (!animatedRef.current || !startRect || !endRect) {\n        return;\n    }\n\n    if (animationInstanceRef.current) {\n        return;\n    }\n\n    console.log(`[FlyingCardAnimation] Karte ${card.id}: Starting animation from (${startRect.left},${startRect.top}) to (${endRect.left},${endRect.top})`);\n\n    const deltaX = endRect.left - startRect.left;\n    const deltaY = endRect.top - startRect.top;\n\n    const keyframes = [\n      { transform: 'translate(0, 0)', opacity: 1 },\n      { transform: `translate(${deltaX}px, ${deltaY}px)`, opacity: 1 },\n    ];\n\n    const options = {\n      duration: 500,\n      easing: 'ease-in-out',\n      fill: 'forwards',\n    };\n\n    animationInstanceRef.current = animatedRef.current.animate(keyframes, options);\n\n    animationInstanceRef.current.finished.then(() => {\n      console.log(`[FlyingCardAnimation] Promise-based animation finished for Karte: ${card.id}`);\n      onAnimationEnd(card.id);\n    }).catch(error => {\n      if (error.name === 'AbortError') {\n        console.log(`[FlyingCardAnimation] Karte ${card.id}: Animation was cancelled.`);\n      } else {\n        console.error(`[FlyingCardAnimation] Karte ${card.id}: Animation error:`, error);\n      }\n    });\n\n    const fallbackTimeout = setTimeout(() => {\n        if (animationInstanceRef.current && animationInstanceRef.current.playState !== 'finished' && animationInstanceRef.current.playState !== 'idle') {\n            console.warn(`[FlyingCardAnimation] Fallback: Animation for Karte ${card.id} did not finish (playState: ${animationInstanceRef.current.playState}). Forcing cleanup.`);\n            onAnimationEnd(card.id);\n            animationInstanceRef.current.cancel();\n        }\n    }, options.duration + 200);\n\n    return () => {\n      if (animationInstanceRef.current) {\n        animationInstanceRef.current.cancel();\n      }\n      clearTimeout(fallbackTimeout);\n    };\n  }, [card.id, startRect, endRect, onAnimationEnd]);\n\n  return (\n    <div\n      ref={animatedRef}\n      // CRITICAL CHANGE: Remove conflicting Tailwind classes like p-4, mb-3.\n      // Keep only essential visual (non-sizing/non-text) classes.\n      // bg-white, rounded, shadow-md are okay.\n      className=\"bg-white rounded shadow-md pointer-events-none\" // Removed p-4, mb-3\n      style={{\n        position: 'fixed',\n        left: startRect ? startRect.left : 0,\n        top: startRect ? startRect.top : 0,\n        // CRITICAL: Ensure width and height are from startRect for the clone's initial size\n        width: startRect ? startRect.width : 0,  // Apply width from startRect\n        height: startRect ? startRect.height : 0, // Apply height from startRect\n        zIndex: 1000,\n        opacity: startRect ? 1 : 0, // Start opaque if startRect is available\n        // Manually apply padding, font size, and text wrapping rules here to match the resting card\n        padding: '4px 6px', // Matches the Card component's padding\n        fontSize: '0.75rem', // Matches the Card component's font size\n        textAlign: 'center', // Center text\n        display: 'flex',      // Use flexbox for centering content\n        justifyContent: 'center', // Center horizontally\n        alignItems: 'center',     // Center vertically\n        whiteSpace: 'nowrap',   // Prevent text wrapping (fixes carriage return)\n        overflow: 'hidden',      // Hide text that overflows\n        textOverflow: 'ellipsis' // Add \"...\" for hidden text (optional, but good UX)\n      }}\n    >\n      {/* Ensure \"Karte\" text for gliding clone */}\n      {card.birth_id ? `Karte ${card.birth_id}` : card.id}\n    </div>\n  );\n};\n\nexport default FlyingCardAnimation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}