{"ast":null,"code":"var _jsxFileName = \"/Users/ralf/PyPrograms/KanbanFlow-Web/kanban-gui-test/src/components/Card.js\",\n  _s = $RefreshSig$();\n// src/components/Card.js\nimport React, { forwardRef, useCallback } from 'react'; // <--- Import useCallback\nimport { useDrag } from 'react-dnd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  CARD: 'card'\n};\n\n// Use forwardRef to allow parent components (like Board) to get a ref to this component's DOM node\nconst Card = /*#__PURE__*/_s(/*#__PURE__*/forwardRef(_c = _s(({\n  id,\n  text,\n  laneId,\n  index,\n  style\n}, ref) => {\n  _s();\n  // <--- Accept style prop\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: ItemTypes.CARD,\n    item: {\n      id,\n      text,\n      laneId,\n      index\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  }));\n\n  // NEW: Combine multiple refs into a single, robust callback ref\n  const setRefs = useCallback(node => {\n    // Set the external ref (the one passed from Board.js)\n    // Check if 'ref' is a function (legacy ref) or an object (current ref object)\n    if (typeof ref === 'function') {\n      ref(node);\n    } else if (ref) {\n      ref.current = node;\n    }\n\n    // Set react-dnd's drag ref\n    // react-dnd's 'drag' ref can be a function or an object, handle both\n    if (typeof drag === 'function') {\n      drag(node);\n    } else if (drag) {\n      drag.current = node;\n    }\n\n    // Add console log here to trace Card ref assignment\n    if (node) {\n      //console.log(`[Card.js] Card ${id} ref SET:`, node);\n    } else {\n      //  console.log(`[Card.js] Card ${id} ref UNSET (unmounting):`, node);\n    }\n  }, [ref, drag, id] // Dependencies for useCallback: ensure it re-creates if these change\n  );\n  const opacity = isDragging ? 0.4 : 1;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: setRefs // <--- Use the combined callback ref here\n    ,\n    className: \"bg-white p-4 mb-3 rounded shadow-md cursor-grab transition-opacity duration-200 ease-in-out\",\n    style: {\n      ...style,\n      opacity\n    } // <--- Apply external style prop and internal opacity\n    ,\n    children: text\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}, \"s4YW3JZ9SJvS/gJ2jSeepO9XNq8=\", false, function () {\n  return [useDrag];\n})), \"s4YW3JZ9SJvS/gJ2jSeepO9XNq8=\", false, function () {\n  return [useDrag];\n});\n_c2 = Card;\nexport default Card;\nexport { ItemTypes };\nvar _c, _c2;\n$RefreshReg$(_c, \"Card$forwardRef\");\n$RefreshReg$(_c2, \"Card\");","map":{"version":3,"names":["React","forwardRef","useCallback","useDrag","jsxDEV","_jsxDEV","ItemTypes","CARD","Card","_s","_c","id","text","laneId","index","style","ref","isDragging","drag","type","item","collect","monitor","setRefs","node","current","opacity","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["/Users/ralf/PyPrograms/KanbanFlow-Web/kanban-gui-test/src/components/Card.js"],"sourcesContent":["// src/components/Card.js\nimport React, { forwardRef, useCallback } from 'react'; // <--- Import useCallback\nimport { useDrag } from 'react-dnd';\n\nconst ItemTypes = {\n  CARD: 'card',\n};\n\n// Use forwardRef to allow parent components (like Board) to get a ref to this component's DOM node\nconst Card = forwardRef(({ id, text, laneId, index, style }, ref) => { // <--- Accept style prop\n  const [{ isDragging }, drag] = useDrag(() => ({\n    type: ItemTypes.CARD,\n    item: { id, text, laneId, index },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  }));\n\n  // NEW: Combine multiple refs into a single, robust callback ref\n  const setRefs = useCallback(\n    (node) => {\n      // Set the external ref (the one passed from Board.js)\n      // Check if 'ref' is a function (legacy ref) or an object (current ref object)\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n\n      // Set react-dnd's drag ref\n      // react-dnd's 'drag' ref can be a function or an object, handle both\n      if (typeof drag === 'function') {\n        drag(node);\n      } else if (drag) {\n        drag.current = node;\n      }\n\n      // Add console log here to trace Card ref assignment\n      if (node) {\n        //console.log(`[Card.js] Card ${id} ref SET:`, node);\n      } else {\n        //  console.log(`[Card.js] Card ${id} ref UNSET (unmounting):`, node);\n      }\n    },\n    [ref, drag, id] // Dependencies for useCallback: ensure it re-creates if these change\n  );\n\n  const opacity = isDragging ? 0.4 : 1;\n\n  return (\n    <div\n      ref={setRefs} // <--- Use the combined callback ref here\n      className=\"bg-white p-4 mb-3 rounded shadow-md cursor-grab transition-opacity duration-200 ease-in-out\"\n      style={{ ...style, opacity }} // <--- Apply external style prop and internal opacity\n    >\n      {text}\n    </div>\n  );\n});\n\nexport default Card;\nexport { ItemTypes };"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,WAAW,QAAQ,OAAO,CAAC,CAAC;AACxD,SAASC,OAAO,QAAQ,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,SAAS,GAAG;EAChBC,IAAI,EAAE;AACR,CAAC;;AAED;AACA,MAAMC,IAAI,gBAAAC,EAAA,cAAGR,UAAU,CAAAS,EAAA,GAAAD,EAAA,CAAC,CAAC;EAAEE,EAAE;EAAEC,IAAI;EAAEC,MAAM;EAAEC,KAAK;EAAEC;AAAM,CAAC,EAAEC,GAAG,KAAK;EAAAP,EAAA;EAAE;EACrE,MAAM,CAAC;IAAEQ;EAAW,CAAC,EAAEC,IAAI,CAAC,GAAGf,OAAO,CAAC,OAAO;IAC5CgB,IAAI,EAAEb,SAAS,CAACC,IAAI;IACpBa,IAAI,EAAE;MAAET,EAAE;MAAEC,IAAI;MAAEC,MAAM;MAAEC;IAAM,CAAC;IACjCO,OAAO,EAAGC,OAAO,KAAM;MACrBL,UAAU,EAAEK,OAAO,CAACL,UAAU,CAAC;IACjC,CAAC;EACH,CAAC,CAAC,CAAC;;EAEH;EACA,MAAMM,OAAO,GAAGrB,WAAW,CACxBsB,IAAI,IAAK;IACR;IACA;IACA,IAAI,OAAOR,GAAG,KAAK,UAAU,EAAE;MAC7BA,GAAG,CAACQ,IAAI,CAAC;IACX,CAAC,MAAM,IAAIR,GAAG,EAAE;MACdA,GAAG,CAACS,OAAO,GAAGD,IAAI;IACpB;;IAEA;IACA;IACA,IAAI,OAAON,IAAI,KAAK,UAAU,EAAE;MAC9BA,IAAI,CAACM,IAAI,CAAC;IACZ,CAAC,MAAM,IAAIN,IAAI,EAAE;MACfA,IAAI,CAACO,OAAO,GAAGD,IAAI;IACrB;;IAEA;IACA,IAAIA,IAAI,EAAE;MACR;IAAA,CACD,MAAM;MACL;IAAA;EAEJ,CAAC,EACD,CAACR,GAAG,EAAEE,IAAI,EAAEP,EAAE,CAAC,CAAC;EAClB,CAAC;EAED,MAAMe,OAAO,GAAGT,UAAU,GAAG,GAAG,GAAG,CAAC;EAEpC,oBACEZ,OAAA;IACEW,GAAG,EAAEO,OAAQ,CAAC;IAAA;IACdI,SAAS,EAAC,6FAA6F;IACvGZ,KAAK,EAAE;MAAE,GAAGA,KAAK;MAAEW;IAAQ,CAAE,CAAC;IAAA;IAAAE,QAAA,EAE7BhB;EAAI;IAAAiB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEV,CAAC;EAAA,QAhDgC7B,OAAO;AAAA,EAgDvC,CAAC;EAAA,QAhD+BA,OAAO;AAAA,EAgDtC;AAAC8B,GAAA,GAjDGzB,IAAI;AAmDV,eAAeA,IAAI;AACnB,SAASF,SAAS;AAAG,IAAAI,EAAA,EAAAuB,GAAA;AAAAC,YAAA,CAAAxB,EAAA;AAAAwB,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}