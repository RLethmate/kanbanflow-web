{"ast":null,"code":"// src/components/FlyingCardAnimation.js\nimport React,{useEffect,useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const FlyingCardAnimation=_ref=>{let{card,startRect,endRect,onAnimationEnd}=_ref;const animatedRef=useRef(null);const[animationStarted,setAnimationStarted]=useState(false);useEffect(()=>{if(!animatedRef.current||!startRect||!endRect)return;// Calculate the translation needed\nconst deltaX=endRect.left-startRect.left;const deltaY=endRect.top-startRect.top;// Define the animation keyframes\nconst keyframes=[{transform:'translate(0, 0)',opacity:1},// Start at original position\n{transform:`translate(${deltaX}px, ${deltaY}px)`,opacity:1}// End at new position\n];// Define animation options\nconst options={duration:1000,// Animation duration in milliseconds\neasing:'ease-in-out',// Smooth easing function\nfill:'forwards'// Keep the end state\n};// Trigger the animation\nconst animation=animatedRef.current.animate(keyframes,options);animation.onfinish=()=>{onAnimationEnd(card.id);// Notify parent component when animation is done\n};setAnimationStarted(true);// Mark that animation has begun\nreturn()=>{animation.cancel();// Clean up animation on unmount\n};},[card.id,startRect,endRect,onAnimationEnd]);// If animation hasn't started, render it at the initial position\nif(!animationStarted&&startRect){return/*#__PURE__*/_jsx(\"div\",{ref:animatedRef,className:\"bg-white p-4 mb-3 rounded shadow-md pointer-events-none\"// pointer-events-none ensures it doesn't interfere with clicks\n,style:{position:'fixed',// Use fixed to position relative to viewport\nleft:startRect.left,top:startRect.top,width:startRect.width,height:startRect.height,zIndex:1000,// Ensure it's on top\nopacity:1// Start fully opaque\n},children:card.text});}// Once animation starts, the ref will be used by the animate API\n// Render an empty div here, as the animation target will be fixed\nreturn/*#__PURE__*/_jsx(\"div\",{ref:animatedRef,className:\"bg-white p-4 mb-3 rounded shadow-md pointer-events-none\",style:{position:'fixed',left:startRect.left,// Keep initial position for reference\ntop:startRect.top,width:startRect.width,height:startRect.height,zIndex:1000,opacity:0// Initially hide the card itself as it's not the one animating\n},children:card.text});};export default FlyingCardAnimation;","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","FlyingCardAnimation","_ref","card","startRect","endRect","onAnimationEnd","animatedRef","animationStarted","setAnimationStarted","current","deltaX","left","deltaY","top","keyframes","transform","opacity","options","duration","easing","fill","animation","animate","onfinish","id","cancel","ref","className","style","position","width","height","zIndex","children","text"],"sources":["/Users/ralf/PyPrograms/KanbanFlow-Web/kanban-gui-test/src/components/FlyingCardAnimation.js"],"sourcesContent":["// src/components/FlyingCardAnimation.js\nimport React, { useEffect, useRef, useState } from 'react';\n\nconst FlyingCardAnimation = ({ card, startRect, endRect, onAnimationEnd }) => {\n  const animatedRef = useRef(null);\n  const [animationStarted, setAnimationStarted] = useState(false);\n\n  useEffect(() => {\n    if (!animatedRef.current || !startRect || !endRect) return;\n\n    // Calculate the translation needed\n    const deltaX = endRect.left - startRect.left;\n    const deltaY = endRect.top - startRect.top;\n\n    // Define the animation keyframes\n    const keyframes = [\n      { transform: 'translate(0, 0)', opacity: 1 }, // Start at original position\n      { transform: `translate(${deltaX}px, ${deltaY}px)`, opacity: 1 }, // End at new position\n    ];\n\n    // Define animation options\n    const options = {\n      duration: 1000, // Animation duration in milliseconds\n      easing: 'ease-in-out', // Smooth easing function\n      fill: 'forwards', // Keep the end state\n    };\n\n    // Trigger the animation\n    const animation = animatedRef.current.animate(keyframes, options);\n\n    animation.onfinish = () => {\n      onAnimationEnd(card.id); // Notify parent component when animation is done\n    };\n\n    setAnimationStarted(true); // Mark that animation has begun\n\n    return () => {\n      animation.cancel(); // Clean up animation on unmount\n    };\n  }, [card.id, startRect, endRect, onAnimationEnd]);\n\n  // If animation hasn't started, render it at the initial position\n  if (!animationStarted && startRect) {\n    return (\n      <div\n        ref={animatedRef}\n        className=\"bg-white p-4 mb-3 rounded shadow-md pointer-events-none\" // pointer-events-none ensures it doesn't interfere with clicks\n        style={{\n          position: 'fixed', // Use fixed to position relative to viewport\n          left: startRect.left,\n          top: startRect.top,\n          width: startRect.width,\n          height: startRect.height,\n          zIndex: 1000, // Ensure it's on top\n          opacity: 1, // Start fully opaque\n        }}\n      >\n        {card.text}\n      </div>\n    );\n  }\n\n  // Once animation starts, the ref will be used by the animate API\n  // Render an empty div here, as the animation target will be fixed\n  return (\n    <div\n      ref={animatedRef}\n      className=\"bg-white p-4 mb-3 rounded shadow-md pointer-events-none\"\n      style={{\n        position: 'fixed',\n        left: startRect.left, // Keep initial position for reference\n        top: startRect.top,\n        width: startRect.width,\n        height: startRect.height,\n        zIndex: 1000,\n        opacity: 0, // Initially hide the card itself as it's not the one animating\n      }}\n    >\n      {card.text}\n    </div>\n  );\n};\n\nexport default FlyingCardAnimation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}