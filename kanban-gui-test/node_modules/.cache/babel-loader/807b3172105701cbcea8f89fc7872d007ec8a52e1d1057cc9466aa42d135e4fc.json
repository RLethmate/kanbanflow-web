{"ast":null,"code":"var _jsxFileName = \"/Users/ralf/PyPrograms/KanbanFlow-Web/kanban-gui-test/src/components/Board.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\n// Lane is still imported, but its content is rendered inline for flexibility to manage layout\nimport Lane from './Lane';\nimport Card from './Card';\nimport FlyingCardAnimation from './FlyingCardAnimation';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://127.0.0.1:8000'; // Your FastAPI backend URL\n\nconst Board = () => {\n  _s();\n  const [lanes, setLanes] = useState([]);\n  const [dashboardData, setDashboardData] = useState([]);\n\n  // Default complexity for \"Schritt A/B/C\" columns (IDs 1, 3, 5)\n  const [complexity, setComplexity] = useState({\n    1: 1,\n    3: 1,\n    5: 1\n  });\n  const [wipLimit, setWipLimit] = useState(5);\n  const [simSpeed, setSimSpeed] = useState(1.0);\n  const [simulationRunning, setSimulationRunning] = useState(false);\n  const flyingAnimations = useRef([]); // Manages active gliding animations\n  const cardRefs = useRef(new Map()); // Stores DOM refs for cards\n  const laneRefs = useRef(new Map()); // Stores DOM refs for lanes\n\n  const [isReady, setIsReady] = useState(false); // UI readiness flag\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      setIsReady(true);\n      console.log('Board component and initial refs are likely ready.');\n    }, 100);\n    return () => clearTimeout(timeoutId);\n  }, []);\n\n  // Helper to get a card by its ID from current React lanes state\n  const getCardById = useCallback(cardId => {\n    for (const lane of lanes) {\n      const card = lane.cards.find(c => c.id === cardId);\n      if (card) return card;\n    }\n    return null;\n  }, [lanes]);\n\n  // Triggers the gliding animation for a specific card\n  const programmaticMoveCard = useCallback((cardId, targetLaneId) => {\n    const cardElement = cardRefs.current.get(cardId);\n    const targetLaneElement = laneRefs.current.get(targetLaneId);\n    if (!cardElement || !targetLaneElement) {\n      console.warn(`[Gliding Trace] Could not find element for card ${cardId} or lane ${targetLaneId}. Cannot animate.`);\n      return;\n    }\n    const startRect = cardElement.getBoundingClientRect();\n    const currentCardData = getCardById(cardId);\n    if (!currentCardData) {\n      console.warn(`[Gliding Trace] Card ${cardId} not found in current state for animation.`);\n      return;\n    }\n    console.log(`[Gliding Trace] Initiating animation for ${cardId}. Current flyingAnimations count: ${flyingAnimations.current.length}.`);\n\n    // Add animation data immediately\n    flyingAnimations.current.push({\n      id: `flying-${cardId}-${Date.now()}`,\n      // Unique ID for this animation instance\n      card: currentCardData,\n      startRect: startRect,\n      endRect: null // Will be updated via rAF\n    });\n    // Force React to re-render to pick up new items in flyingAnimations.current\n    flyingAnimations.current = [...flyingAnimations.current];\n    console.log(`[Gliding Trace] Added ${cardId}. New flyingAnimations count: ${flyingAnimations.current.length}. Array: `, flyingAnimations.current.map(a => a.card.id));\n\n    // Schedule getting endRect after React re-renders the actual card\n    requestAnimationFrame(() => {\n      flyingAnimations.current = flyingAnimations.current.map(anim => {\n        // Only process animations that have a startRect but no endRect yet AND match this card's ID\n        if (anim.card.id === cardId && anim.startRect && anim.endRect === null) {\n          const newCardInDOM = cardRefs.current.get(anim.card.id);\n          if (newCardInDOM) {\n            const endRect = newCardInDOM.getBoundingClientRect();\n            return {\n              ...anim,\n              endRect: endRect\n            };\n          } else {\n            console.warn(`[Gliding-Fix] Card ${anim.card.id} not found in new DOM position for endRect. Cancelling animation clone.`);\n            return null; // Mark for removal\n          }\n        }\n        return anim; // Return other animations as is\n      }).filter(Boolean); // Remove any null entries (cancelled animations)\n      flyingAnimations.current = [...flyingAnimations.current]; // Force re-render after updating endRects\n      console.log(`[Gliding Trace] After rAF update. Current flyingAnimations count: ${flyingAnimations.current.length}. Array: `, flyingAnimations.current.map(a => a.card.id));\n    });\n  }, [getCardById]);\n\n  // Callback from FlyingCardAnimation when an animation finishes\n  const handleAnimationEnd = useCallback(animatedCardId => {\n    console.log(`[Gliding Trace] Animation ended for card: ${animatedCardId}. Clearing animation entry.`);\n    const initialCount = flyingAnimations.current.length;\n    flyingAnimations.current = flyingAnimations.current.filter(anim => anim.card.id !== animatedCardId);\n    flyingAnimations.current = [...flyingAnimations.current];\n    console.log(`[Gliding Trace] After filter for ${animatedCardId}. Count changed from ${initialCount} to ${flyingAnimations.current.length}. Array: `, flyingAnimations.current.map(a => a.card.id));\n  }, []);\n\n  // --- API Call Functions ---\n  // Sets simulation parameters on the backend\n  const setConfig = useCallback(async () => {\n    console.log(\"setConfig: Attempting to set simulation config...\");\n    try {\n      const response = await fetch(`${API_BASE_URL}/simulation/config`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          complexity,\n          wip_limit: wipLimit,\n          speed: simSpeed\n        })\n      });\n      console.log(\"setConfig: Fetch request sent and response received.\");\n      const data = await response.json();\n      if (response.ok) {\n        console.log('setConfig: Config set successfully:', data);\n        return true; // Indicate success\n      } else {\n        console.error('setConfig: Failed to set config (server responded with error):', data);\n        return false; // Indicate failure\n      }\n    } catch (error) {\n      console.error('setConfig: Network error or problem sending request:', error);\n      return false; // Indicate failure\n    }\n  }, [complexity, wipLimit, simSpeed]);\n\n  // Starts the simulation\n  const startSimulation = useCallback(async () => {\n    console.log(\"startSimulation: Attempting to start simulation...\");\n    try {\n      // Await setConfig and check its return value for success\n      const configSetSuccess = await setConfig();\n      if (!configSetSuccess) {\n        console.warn(\"startSimulation: Configuration failed. Aborting simulation start.\");\n        setSimulationRunning(false); // Ensure UI button state is correct\n        return; // Exit if config failed\n      }\n      console.log(\"startSimulation: setConfig call finished and successful.\");\n\n      // Now attempt to start the simulation itself\n      const response = await fetch(`${API_BASE_URL}/simulation/start`, {\n        method: 'POST'\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log('startSimulation: Simulation started successfully:', data);\n        setSimulationRunning(true); // Update state to running\n      } else {\n        console.error('startSimulation: Failed to start simulation (server responded with error):', data);\n        // If the backend says it's already running, sync frontend state.\n        if (data.detail && data.detail === 'Simulation is already running.') {\n          console.log(\"startSimulation: Backend reported simulation already running. Syncing frontend state.\");\n          setSimulationRunning(true); // Sync frontend state (button becomes disabled)\n        } else {\n          // General error\n          setSimulationRunning(false); // Ensure UI button state is correct\n        }\n      }\n    } catch (error) {\n      console.error('startSimulation: Network error starting simulation or error from setConfig:', error);\n      setSimulationRunning(false); // Assume failure, ensure UI button state is correct\n    }\n  }, [setConfig]); // Dependency: setConfig must be robust\n\n  // Stops the simulation\n  const stopSimulation = useCallback(async () => {\n    console.log(\"Stopping simulation...\");\n    try {\n      const response = await fetch(`${API_BASE_URL}/simulation/stop`, {\n        method: 'POST'\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log('Simulation stopped:', data);\n        setSimulationRunning(false);\n      } else {\n        console.error('Failed to stop simulation:', data);\n      }\n    } catch (error) {\n      console.error('Network error stopping simulation:', error);\n    }\n  }, []);\n\n  // Clears dashboard data\n  const clearDashboard = useCallback(async () => {\n    console.log(\"Clearing dashboard...\");\n    try {\n      const response = await fetch(`${API_BASE_URL}/dashboard/clear`, {\n        method: 'POST'\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log('Dashboard cleared:', data);\n        setDashboardData([]); // Clear frontend dashboard data instantly\n      } else {\n        console.error('Failed to clear dashboard:', data);\n      }\n    } catch (error) {\n      console.error('Network error clearing dashboard:', error);\n    }\n  }, []);\n\n  // --- Polling for Board State and Dashboard Data ---\n  // Fetches simulation data periodically from backend\n  useEffect(() => {\n    let intervalId;\n    const pollingInterval = 1000; // Poll every 1 second\n\n    const fetchSimulationData = async () => {\n      // Fetch board state\n      try {\n        const boardResponse = await fetch(`${API_BASE_URL}/simulation/status`);\n        const boardData = await boardResponse.json();\n        if (boardResponse.ok) {\n          setSimulationRunning(boardData.is_running); // Sync running status from backend\n\n          setLanes(prevLanes => {\n            const newLanes = boardData.lanes;\n            if (!prevLanes.length) return newLanes; // First load, no animation needed, just set initial state\n\n            const cardsToAnimateData = []; // Store data for cards that need gliding\n\n            // Step 1: Create a quick lookup map for cards in the *previous* state\n            const oldCardsMap = new Map();\n            prevLanes.forEach(lane => {\n              lane.cards.forEach(card => {\n                oldCardsMap.set(card.id, card);\n              });\n            });\n\n            // Step 2: Iterate through cards in the *new* state to detect moves\n            for (const newLane of newLanes) {\n              for (const newCard of newLane.cards) {\n                const oldCard = oldCardsMap.get(newCard.id);\n\n                // Condition for triggering a glide animation:\n                // 1. The card existed in the previous state.\n                // 2. Its current lane (newCard.col) is different from its previous lane (oldCard.col).\n                if (oldCard && oldCard.col !== newCard.col) {\n                  const cardElement = cardRefs.current.get(oldCard.id); // Try to get the DOM element of the OLD card\n\n                  // Only attempt to animate if the old card's DOM element is *still present*\n                  // at its previous location when we poll.\n                  if (cardElement) {\n                    cardsToAnimateData.push({\n                      card: oldCard,\n                      // Pass the OLD card data to the animation clone\n                      newLaneId: newCard.col,\n                      // The new column ID is the target lane ID\n                      startRect: cardElement.getBoundingClientRect() // Capture START position from the OLD element\n                    });\n                  } else {\n                    console.warn(`[Gliding-Fix] Old element for card ${oldCard.id} (from lane ${oldCard.col} to ${newCard.col}) not found for animation. Skipping glide.`);\n                  }\n                }\n              }\n            }\n\n            // Immediately push animation data to the ref, then force re-render\n            // This ensures FlyingCardAnimation components are mounted quickly when original hides.\n            cardsToAnimateData.forEach(animData => {\n              flyingAnimations.current.push({\n                id: `flying-${animData.card.id}-${Date.now()}`,\n                // Unique ID for this animation instance\n                card: animData.card,\n                startRect: animData.startRect,\n                endRect: null // Will be updated by requestAnimationFrame\n              });\n            });\n            flyingAnimations.current = [...flyingAnimations.current]; // Force re-render\n\n            // Schedule endRect calculation after React updates DOM for newLanes\n            requestAnimationFrame(() => {\n              flyingAnimations.current = flyingAnimations.current.map(anim => {\n                // Only process animations that have a startRect but no endRect yet\n                if (anim.startRect && anim.endRect === null) {\n                  const newCardInDOM = cardRefs.current.get(anim.card.id);\n                  if (newCardInDOM) {\n                    const endRect = newCardInDOM.getBoundingClientRect();\n                    return {\n                      ...anim,\n                      endRect: endRect\n                    };\n                  } else {\n                    console.warn(`[Gliding-Fix] Card ${anim.card.id} not found in new DOM position for endRect. Cancelling animation clone.`);\n                    return null;\n                  }\n                }\n                return anim; // Return already completed animations as is\n              }).filter(Boolean); // Remove any null entries (cancelled animations)\n              flyingAnimations.current = [...flyingAnimations.current]; // Force re-render after updating endRects\n            });\n            return newLanes; // This updates the React `lanes` state with the new board data\n          });\n        } else {\n          console.error('Failed to fetch board state:', boardData);\n          setSimulationRunning(false);\n        }\n      } catch (error) {\n        console.error('Network error fetching board state:', error);\n        setSimulationRunning(false);\n      }\n\n      // Fetch dashboard data\n      try {\n        const dashboardResponse = await fetch(`${API_BASE_URL}/dashboard/data`);\n        const dashboardData = await dashboardResponse.json();\n        if (dashboardResponse.ok) {\n          setDashboardData(dashboardData.dashboard_entries || []);\n        } else {\n          console.error('Failed to fetch dashboard data:', dashboardData);\n        }\n      } catch (error) {\n        console.error('Network error fetching dashboard data:', error);\n      }\n    };\n    fetchSimulationData(); // Initial fetch on mount\n    intervalId = setInterval(fetchSimulationData, pollingInterval); // Set up polling interval\n    return () => {\n      clearInterval(intervalId); // Clear interval on component unmount\n      console.log('Polling interval cleared.');\n    };\n  }, [programmaticMoveCard]); // Re-run effect if programmaticMoveCard callback changes (unlikely)\n\n  // Handler for individual complexity input changes\n  const handleComplexityChange = useCallback((colId, value) => {\n    setComplexity(prev => ({\n      ...prev,\n      [colId]: parseInt(value) || 0 // Ensure it's an integer\n    }));\n  }, []);\n  return (\n    /*#__PURE__*/\n    // Overall layout: flex column, centered, with padding\n    _jsxDEV(\"div\", {\n      className: \"flex flex-col p-4 bg-gray-50 min-h-screen items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 bg-white rounded-lg shadow-md w-full max-w-5xl flex flex-col sm:flex-row items-center justify-between gap-3 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-800 flex-shrink-0\",\n          children: \"Steuerung\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 9\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3 flex-grow justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-xs font-bold mb-0\",\n              children: \"Gesamt WIP Limit:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: wipLimit,\n              onChange: e => setWipLimit(parseInt(e.target.value) || 0),\n              className: \"shadow appearance-none border rounded w-20 py-0.5 px-1 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-xs\",\n              min: \"0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-gray-700 text-xs font-bold mb-0\",\n              children: \"Sim. Geschw. (s/Schritt):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.1\",\n              value: simSpeed,\n              onChange: e => setSimSpeed(parseFloat(e.target.value) || 0.0),\n              className: \"shadow appearance-none border rounded w-20 py-0.5 px-1 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-xs\",\n              min: \"0.1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center space-x-2 flex-shrink-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startSimulation,\n            disabled: !isReady || simulationRunning,\n            className: `px-3 py-1.5 rounded-lg text-white font-bold text-sm transition-colors duration-200 ${!isReady || simulationRunning ? 'bg-gray-400 cursor-not-allowed' : 'bg-green-500 hover:bg-green-700'}`,\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: stopSimulation,\n            disabled: !isReady || !simulationRunning,\n            className: `px-3 py-1.5 rounded-lg text-white font-bold text-sm transition-colors duration-200 ${!isReady || !simulationRunning ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-500 hover:bg-red-700'}`,\n            children: \"Stopp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearDashboard,\n            disabled: !isReady,\n            className: `px-3 py-1.5 rounded-lg text-white font-bold text-sm transition-colors duration-200 ${!isReady ? 'bg-gray-400 cursor-not-allowed' : 'bg-yellow-500 hover:bg-yellow-700'}`,\n            children: \"L\\xF6schen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex p-2 overflow-x-auto items-start bg-gray-100 rounded-lg shadow-inner flex-grow w-full max-w-5xl\",\n        children: lanes.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-gray-500 w-full p-10\",\n          children: \"Keine Board-Daten verf\\xFCgbar. Simulation starten.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this) : lanes.map(lane => /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: el => {\n            if (el) laneRefs.current.set(lane.id, el);else laneRefs.current.delete(lane.id);\n          }\n          // Column base styling: fixed width, flex column for header/cards stacking\n          ,\n          className: \"flex-shrink-0 mr-1 bg-gray-200 rounded-lg shadow-inner flex flex-col items-center\",\n          style: {\n            width: '130px',\n            minHeight: '400px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-1.5 bg-gray-300 rounded-t-lg text-center w-full border-b border-gray-400\",\n            style: {\n              minHeight: '60px'\n            },\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-sm font-semibold text-gray-800 pb-0.5\",\n              children: lane.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this), lane.max_wip_in_round !== undefined && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-gray-600 block\",\n              children: [\"Max WIP: \", lane.max_wip_in_round]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 21\n            }, this), (lane.id === 'lane-1' || lane.id === 'lane-3' || lane.id === 'lane-5') && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-1 flex items-center justify-center gap-1\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-gray-700 text-xs font-bold\",\n                children: \"K'xit\\xE4t:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 25\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: complexity[parseInt(lane.id.split('-')[1])] || 1,\n                onChange: e => handleComplexityChange(parseInt(lane.id.split('-')[1]), e.target.value),\n                className: \"shadow appearance-none border rounded w-10 py-0 px-0.5 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-xs text-center\",\n                min: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-center w-full mt-1 overflow-y-auto\",\n            style: {\n              maxHeight: 'calc(100% - 70px)'\n            },\n            children: [\" \", lane.cards.map((card, index) => {\n              const isFlyingClone = flyingAnimations.current.some(anim => anim.card.id === card.id);\n              return /*#__PURE__*/_jsxDEV(Card, {\n                id: card.id,\n                text: card.birth_id ? `Karte ${card.birth_id}` : card.id,\n                laneId: card.col,\n                index: index,\n                ref: el => {\n                  if (el) cardRefs.current.set(card.id, el);else cardRefs.current.delete(card.id);\n                },\n                style: {\n                  visibility: isFlyingClone ? 'hidden' : 'visible',\n                  backgroundColor: card.is_red ? '#ca0633' : '#ffffff',\n                  width: '90px',\n                  height: '30px',\n                  padding: '4px 6px',\n                  fontSize: '0.75rem',\n                  textAlign: 'center',\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                  marginBottom: '4px'\n                }\n              }, card.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 15\n          }, this)]\n        }, lane.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-2 bg-white rounded-lg shadow-md w-full max-w-5xl text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-800 mb-2 border-b pb-1\",\n          children: \"Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 9\n        }, this), dashboardData.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 text-xs p-1\",\n          children: \"Dashboard ist leer. Simulation starten.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full divide-y divide-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Runde\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"WiP Limit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Durchlaufzeit (Rot)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Flusseff.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"in Arbeit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Erledigt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Durchsatz\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: dashboardData.slice().reverse().map((entry, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-1 py-1 whitespace-nowrap text-xs text-gray-900\",\n                  children: entry.round\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-1 py-1 whitespace-nowrap text-xs text-gray-900\",\n                  children: entry.wip_limit\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-1 py-1 whitespace-nowrap text-xs text-gray-900\",\n                  children: entry.red_card_cycle_time\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-1 py-1 whitespace-nowrap text-xs text-gray-900\",\n                  children: entry.flow_efficiency\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-1 py-1 whitespace-nowrap text-xs text-gray-900\",\n                  children: entry.in_progress\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 503,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-1 py-1 whitespace-nowrap text-xs text-gray-900\",\n                  children: entry.done\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-1 py-1 whitespace-nowrap text-xs text-gray-900\",\n                  children: entry.throughput\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 7\n      }, this), flyingAnimations.current.map(anim => anim.startRect && /*#__PURE__*/_jsxDEV(FlyingCardAnimation, {\n        card: anim.card,\n        startRect: anim.startRect,\n        endRect: anim.endRect,\n        onAnimationEnd: handleAnimationEnd\n      }, anim.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s(Board, \"BWDALJw5VP4/A3Hzab3oEkC1GoM=\");\n_c = Board;\nexport default Board;\nvar _c;\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["React","useState","useCallback","useRef","useEffect","Lane","Card","FlyingCardAnimation","jsxDEV","_jsxDEV","API_BASE_URL","Board","_s","lanes","setLanes","dashboardData","setDashboardData","complexity","setComplexity","wipLimit","setWipLimit","simSpeed","setSimSpeed","simulationRunning","setSimulationRunning","flyingAnimations","cardRefs","Map","laneRefs","isReady","setIsReady","timeoutId","setTimeout","console","log","clearTimeout","getCardById","cardId","lane","card","cards","find","c","id","programmaticMoveCard","targetLaneId","cardElement","current","get","targetLaneElement","warn","startRect","getBoundingClientRect","currentCardData","length","push","Date","now","endRect","map","a","requestAnimationFrame","anim","newCardInDOM","filter","Boolean","handleAnimationEnd","animatedCardId","initialCount","setConfig","response","fetch","method","headers","body","JSON","stringify","wip_limit","speed","data","json","ok","error","startSimulation","configSetSuccess","detail","stopSimulation","clearDashboard","intervalId","pollingInterval","fetchSimulationData","boardResponse","boardData","is_running","prevLanes","newLanes","cardsToAnimateData","oldCardsMap","forEach","set","newLane","newCard","oldCard","col","newLaneId","animData","dashboardResponse","dashboard_entries","setInterval","clearInterval","handleComplexityChange","colId","value","prev","parseInt","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","e","target","min","step","parseFloat","onClick","disabled","ref","el","delete","style","width","minHeight","title","max_wip_in_round","undefined","split","maxHeight","index","isFlyingClone","some","text","birth_id","laneId","visibility","backgroundColor","is_red","height","padding","fontSize","textAlign","display","justifyContent","alignItems","marginBottom","slice","reverse","entry","round","red_card_cycle_time","flow_efficiency","in_progress","done","throughput","onAnimationEnd","_c","$RefreshReg$"],"sources":["/Users/ralf/PyPrograms/KanbanFlow-Web/kanban-gui-test/src/components/Board.js"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from 'react';\n// Lane is still imported, but its content is rendered inline for flexibility to manage layout\nimport Lane from './Lane';\nimport Card from './Card';\nimport FlyingCardAnimation from './FlyingCardAnimation';\n\nconst API_BASE_URL = 'http://127.0.0.1:8000'; // Your FastAPI backend URL\n\nconst Board = () => {\n  const [lanes, setLanes] = useState([]);\n  const [dashboardData, setDashboardData] = useState([]);\n\n  // Default complexity for \"Schritt A/B/C\" columns (IDs 1, 3, 5)\n  const [complexity, setComplexity] = useState({ 1: 1, 3: 1, 5: 1 });\n  const [wipLimit, setWipLimit] = useState(5);\n  const [simSpeed, setSimSpeed] = useState(1.0);\n\n  const [simulationRunning, setSimulationRunning] = useState(false);\n\n  const flyingAnimations = useRef([]); // Manages active gliding animations\n  const cardRefs = useRef(new Map()); // Stores DOM refs for cards\n  const laneRefs = useRef(new Map()); // Stores DOM refs for lanes\n\n  const [isReady, setIsReady] = useState(false); // UI readiness flag\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      setIsReady(true);\n      console.log('Board component and initial refs are likely ready.');\n    }, 100);\n    return () => clearTimeout(timeoutId);\n  }, []);\n\n  // Helper to get a card by its ID from current React lanes state\n  const getCardById = useCallback((cardId) => {\n    for (const lane of lanes) {\n      const card = lane.cards.find(c => c.id === cardId);\n      if (card) return card;\n    }\n    return null;\n  }, [lanes]);\n\n  // Triggers the gliding animation for a specific card\n  const programmaticMoveCard = useCallback((cardId, targetLaneId) => {\n    const cardElement = cardRefs.current.get(cardId);\n    const targetLaneElement = laneRefs.current.get(targetLaneId);\n\n    if (!cardElement || !targetLaneElement) {\n      console.warn(`[Gliding Trace] Could not find element for card ${cardId} or lane ${targetLaneId}. Cannot animate.`);\n      return;\n    }\n\n    const startRect = cardElement.getBoundingClientRect();\n    const currentCardData = getCardById(cardId);\n\n    if (!currentCardData) {\n        console.warn(`[Gliding Trace] Card ${cardId} not found in current state for animation.`);\n        return;\n    }\n\n    console.log(`[Gliding Trace] Initiating animation for ${cardId}. Current flyingAnimations count: ${flyingAnimations.current.length}.`);\n\n    // Add animation data immediately\n    flyingAnimations.current.push({\n        id: `flying-${cardId}-${Date.now()}`, // Unique ID for this animation instance\n        card: currentCardData,\n        startRect: startRect,\n        endRect: null // Will be updated via rAF\n    });\n    // Force React to re-render to pick up new items in flyingAnimations.current\n    flyingAnimations.current = [...flyingAnimations.current]; \n    console.log(`[Gliding Trace] Added ${cardId}. New flyingAnimations count: ${flyingAnimations.current.length}. Array: `, flyingAnimations.current.map(a => a.card.id));\n\n\n    // Schedule getting endRect after React re-renders the actual card\n    requestAnimationFrame(() => {\n        flyingAnimations.current = flyingAnimations.current.map(anim => {\n            // Only process animations that have a startRect but no endRect yet AND match this card's ID\n            if (anim.card.id === cardId && anim.startRect && anim.endRect === null) {\n                const newCardInDOM = cardRefs.current.get(anim.card.id);\n                if (newCardInDOM) {\n                    const endRect = newCardInDOM.getBoundingClientRect();\n                    return { ...anim, endRect: endRect };\n                } else {\n                    console.warn(`[Gliding-Fix] Card ${anim.card.id} not found in new DOM position for endRect. Cancelling animation clone.`);\n                    return null; // Mark for removal\n                }\n            }\n            return anim; // Return other animations as is\n        }).filter(Boolean); // Remove any null entries (cancelled animations)\n        flyingAnimations.current = [...flyingAnimations.current]; // Force re-render after updating endRects\n        console.log(`[Gliding Trace] After rAF update. Current flyingAnimations count: ${flyingAnimations.current.length}. Array: `, flyingAnimations.current.map(a => a.card.id));\n    });\n\n  }, [getCardById]);\n\n  // Callback from FlyingCardAnimation when an animation finishes\n  const handleAnimationEnd = useCallback((animatedCardId) => {\n    console.log(`[Gliding Trace] Animation ended for card: ${animatedCardId}. Clearing animation entry.`);\n    const initialCount = flyingAnimations.current.length;\n    flyingAnimations.current = flyingAnimations.current.filter(anim => anim.card.id !== animatedCardId);\n    flyingAnimations.current = [...flyingAnimations.current];\n    console.log(`[Gliding Trace] After filter for ${animatedCardId}. Count changed from ${initialCount} to ${flyingAnimations.current.length}. Array: `, flyingAnimations.current.map(a => a.card.id));\n  }, []);\n\n  // --- API Call Functions ---\n  // Sets simulation parameters on the backend\n  const setConfig = useCallback(async () => {\n    console.log(\"setConfig: Attempting to set simulation config...\");\n    try {\n      const response = await fetch(`${API_BASE_URL}/simulation/config`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ complexity, wip_limit: wipLimit, speed: simSpeed }),\n      });\n      console.log(\"setConfig: Fetch request sent and response received.\");\n      const data = await response.json();\n      if (response.ok) {\n        console.log('setConfig: Config set successfully:', data);\n        return true; // Indicate success\n      } else {\n        console.error('setConfig: Failed to set config (server responded with error):', data);\n        return false; // Indicate failure\n      }\n    } catch (error) {\n      console.error('setConfig: Network error or problem sending request:', error);\n      return false; // Indicate failure\n    }\n  }, [complexity, wipLimit, simSpeed]);\n\n  // Starts the simulation\n  const startSimulation = useCallback(async () => {\n    console.log(\"startSimulation: Attempting to start simulation...\");\n    try {\n      // Await setConfig and check its return value for success\n      const configSetSuccess = await setConfig();\n      if (!configSetSuccess) {\n        console.warn(\"startSimulation: Configuration failed. Aborting simulation start.\");\n        setSimulationRunning(false); // Ensure UI button state is correct\n        return; // Exit if config failed\n      }\n      console.log(\"startSimulation: setConfig call finished and successful.\");\n\n      // Now attempt to start the simulation itself\n      const response = await fetch(`${API_BASE_URL}/simulation/start`, {\n        method: 'POST',\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log('startSimulation: Simulation started successfully:', data);\n        setSimulationRunning(true); // Update state to running\n      } else {\n        console.error('startSimulation: Failed to start simulation (server responded with error):', data);\n        // If the backend says it's already running, sync frontend state.\n        if (data.detail && data.detail === 'Simulation is already running.') {\n            console.log(\"startSimulation: Backend reported simulation already running. Syncing frontend state.\");\n            setSimulationRunning(true); // Sync frontend state (button becomes disabled)\n        } else {\n            // General error\n            setSimulationRunning(false); // Ensure UI button state is correct\n        }\n      }\n    } catch (error) {\n      console.error('startSimulation: Network error starting simulation or error from setConfig:', error);\n      setSimulationRunning(false); // Assume failure, ensure UI button state is correct\n    }\n  }, [setConfig]); // Dependency: setConfig must be robust\n\n  // Stops the simulation\n  const stopSimulation = useCallback(async () => {\n    console.log(\"Stopping simulation...\");\n    try {\n      const response = await fetch(`${API_BASE_URL}/simulation/stop`, {\n        method: 'POST',\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log('Simulation stopped:', data);\n        setSimulationRunning(false);\n      } else {\n        console.error('Failed to stop simulation:', data);\n      }\n    } catch (error) {\n      console.error('Network error stopping simulation:', error);\n    }\n  }, []);\n\n  // Clears dashboard data\n  const clearDashboard = useCallback(async () => {\n    console.log(\"Clearing dashboard...\");\n    try {\n      const response = await fetch(`${API_BASE_URL}/dashboard/clear`, {\n        method: 'POST',\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log('Dashboard cleared:', data);\n        setDashboardData([]); // Clear frontend dashboard data instantly\n      } else {\n        console.error('Failed to clear dashboard:', data);\n      }\n    } catch (error) {\n      console.error('Network error clearing dashboard:', error);\n    }\n  }, []);\n\n  // --- Polling for Board State and Dashboard Data ---\n  // Fetches simulation data periodically from backend\n  useEffect(() => {\n    let intervalId;\n    const pollingInterval = 1000; // Poll every 1 second\n\n    const fetchSimulationData = async () => {\n      // Fetch board state\n      try {\n        const boardResponse = await fetch(`${API_BASE_URL}/simulation/status`);\n        const boardData = await boardResponse.json();\n        if (boardResponse.ok) {\n          setSimulationRunning(boardData.is_running); // Sync running status from backend\n\n          setLanes(prevLanes => {\n            const newLanes = boardData.lanes;\n            if (!prevLanes.length) return newLanes; // First load, no animation needed, just set initial state\n\n            const cardsToAnimateData = []; // Store data for cards that need gliding\n\n            // Step 1: Create a quick lookup map for cards in the *previous* state\n            const oldCardsMap = new Map();\n            prevLanes.forEach(lane => {\n                lane.cards.forEach(card => {\n                    oldCardsMap.set(card.id, card);\n                });\n            });\n\n            // Step 2: Iterate through cards in the *new* state to detect moves\n            for (const newLane of newLanes) {\n                for (const newCard of newLane.cards) {\n                    const oldCard = oldCardsMap.get(newCard.id);\n\n                    // Condition for triggering a glide animation:\n                    // 1. The card existed in the previous state.\n                    // 2. Its current lane (newCard.col) is different from its previous lane (oldCard.col).\n                    if (oldCard && oldCard.col !== newCard.col) {\n                        const cardElement = cardRefs.current.get(oldCard.id); // Try to get the DOM element of the OLD card\n\n                        // Only attempt to animate if the old card's DOM element is *still present*\n                        // at its previous location when we poll.\n                        if (cardElement) {\n                            cardsToAnimateData.push({\n                                card: oldCard, // Pass the OLD card data to the animation clone\n                                newLaneId: newCard.col, // The new column ID is the target lane ID\n                                startRect: cardElement.getBoundingClientRect() // Capture START position from the OLD element\n                            });\n                        } else {\n                            console.warn(`[Gliding-Fix] Old element for card ${oldCard.id} (from lane ${oldCard.col} to ${newCard.col}) not found for animation. Skipping glide.`);\n                        }\n                    }\n                }\n            }\n\n            // Immediately push animation data to the ref, then force re-render\n            // This ensures FlyingCardAnimation components are mounted quickly when original hides.\n            cardsToAnimateData.forEach(animData => {\n                flyingAnimations.current.push({\n                    id: `flying-${animData.card.id}-${Date.now()}`, // Unique ID for this animation instance\n                    card: animData.card,\n                    startRect: animData.startRect,\n                    endRect: null // Will be updated by requestAnimationFrame\n                });\n            });\n            flyingAnimations.current = [...flyingAnimations.current]; // Force re-render\n\n            // Schedule endRect calculation after React updates DOM for newLanes\n            requestAnimationFrame(() => {\n                flyingAnimations.current = flyingAnimations.current.map(anim => {\n                    // Only process animations that have a startRect but no endRect yet\n                    if (anim.startRect && anim.endRect === null) {\n                        const newCardInDOM = cardRefs.current.get(anim.card.id);\n                        if (newCardInDOM) {\n                          const endRect = newCardInDOM.getBoundingClientRect();\n                          return { ...anim, endRect: endRect };\n                        } else {\n                          console.warn(`[Gliding-Fix] Card ${anim.card.id} not found in new DOM position for endRect. Cancelling animation clone.`);\n                          return null;\n                        }\n                    }\n                    return anim; // Return already completed animations as is\n                }).filter(Boolean); // Remove any null entries (cancelled animations)\n                flyingAnimations.current = [...flyingAnimations.current]; // Force re-render after updating endRects\n            });\n\n            return newLanes; // This updates the React `lanes` state with the new board data\n          });\n\n        } else {\n          console.error('Failed to fetch board state:', boardData);\n          setSimulationRunning(false);\n        }\n      } catch (error) {\n        console.error('Network error fetching board state:', error);\n        setSimulationRunning(false);\n      }\n\n      // Fetch dashboard data\n      try {\n        const dashboardResponse = await fetch(`${API_BASE_URL}/dashboard/data`);\n        const dashboardData = await dashboardResponse.json();\n        if (dashboardResponse.ok) {\n          setDashboardData(dashboardData.dashboard_entries || []);\n        } else {\n          console.error('Failed to fetch dashboard data:', dashboardData);\n        }\n      } catch (error) {\n        console.error('Network error fetching dashboard data:', error);\n      }\n    };\n\n    fetchSimulationData(); // Initial fetch on mount\n    intervalId = setInterval(fetchSimulationData, pollingInterval); // Set up polling interval\n    return () => {\n      clearInterval(intervalId); // Clear interval on component unmount\n      console.log('Polling interval cleared.');\n    };\n  }, [programmaticMoveCard]); // Re-run effect if programmaticMoveCard callback changes (unlikely)\n\n  // Handler for individual complexity input changes\n  const handleComplexityChange = useCallback((colId, value) => {\n    setComplexity(prev => ({\n      ...prev,\n      [colId]: parseInt(value) || 0 // Ensure it's an integer\n    }));\n  }, []);\n\n  return (\n    // Overall layout: flex column, centered, with padding\n    <div className=\"flex flex-col p-4 bg-gray-50 min-h-screen items-center\">\n      {/* Simulation Controls (More Compact and Styled) */}\n      <div className=\"mb-4 p-3 bg-white rounded-lg shadow-md w-full max-w-5xl flex flex-col sm:flex-row items-center justify-between gap-3 text-sm\">\n        <h3 className=\"text-xl font-bold text-gray-800 flex-shrink-0\">Steuerung</h3> {/* German title */}\n        \n        {/* Global Parameters */}\n        <div className=\"flex items-center gap-3 flex-grow justify-center\">\n            <div>\n              <label className=\"block text-gray-700 text-xs font-bold mb-0\">Gesamt WIP Limit:</label>\n              <input\n                type=\"number\"\n                value={wipLimit}\n                onChange={(e) => setWipLimit(parseInt(e.target.value) || 0)}\n                className=\"shadow appearance-none border rounded w-20 py-0.5 px-1 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-xs\"\n                min=\"0\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-gray-700 text-xs font-bold mb-0\">Sim. Geschw. (s/Schritt):</label> {/* Shorter label */}\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                value={simSpeed}\n                onChange={(e) => setSimSpeed(parseFloat(e.target.value) || 0.0)}\n                className=\"shadow appearance-none border rounded w-20 py-0.5 px-1 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-xs\"\n                min=\"0.1\"\n              />\n            </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex justify-center space-x-2 flex-shrink-0\">\n          <button\n            onClick={startSimulation}\n            disabled={!isReady || simulationRunning}\n            className={`px-3 py-1.5 rounded-lg text-white font-bold text-sm transition-colors duration-200 ${\n              !isReady || simulationRunning ? 'bg-gray-400 cursor-not-allowed' : 'bg-green-500 hover:bg-green-700'\n            }`}\n          >\n            Start\n          </button>\n          <button\n            onClick={stopSimulation}\n            disabled={!isReady || !simulationRunning}\n            className={`px-3 py-1.5 rounded-lg text-white font-bold text-sm transition-colors duration-200 ${\n              !isReady || !simulationRunning ? 'bg-gray-400 cursor-not-allowed' : 'bg-red-500 hover:bg-red-700'\n            }`}\n          >\n            Stopp\n          </button>\n          <button\n            onClick={clearDashboard}\n            disabled={!isReady}\n            className={`px-3 py-1.5 rounded-lg text-white font-bold text-sm transition-colors duration-200 ${\n              !isReady ? 'bg-gray-400 cursor-not-allowed' : 'bg-yellow-500 hover:bg-yellow-700'\n            }`}\n          >\n            Lschen\n          </button>\n        </div>\n      </div>\n\n      {/* Kanban Board Display */}\n      {/* Reduced padding, margin-right, and added fixed width for columns */}\n      <div className=\"flex p-2 overflow-x-auto items-start bg-gray-100 rounded-lg shadow-inner flex-grow w-full max-w-5xl\">\n        {lanes.length === 0 ? (\n          <p className=\"text-center text-gray-500 w-full p-10\">\n            Keine Board-Daten verfgbar. Simulation starten.\n          </p>\n        ) : (\n          lanes.map((lane) => (\n            <div\n              key={lane.id}\n              ref={el => {\n                if (el) laneRefs.current.set(lane.id, el);\n                else laneRefs.current.delete(lane.id);\n              }}\n              // Column base styling: fixed width, flex column for header/cards stacking\n              className=\"flex-shrink-0 mr-1 bg-gray-200 rounded-lg shadow-inner flex flex-col items-center\"\n              style={{ width: '130px', minHeight: '400px' }}\n            >\n              {/* NEW: Column Header Section */}\n              <div className=\"p-1.5 bg-gray-300 rounded-t-lg text-center w-full border-b border-gray-400\" style={{ minHeight: '60px' }}> {/* NEW: minHeight for consistent header height */}\n                <h2 className=\"text-sm font-semibold text-gray-800 pb-0.5\">\n                  {lane.title}\n                </h2>\n                {/* Max WIP display for ALL columns */}\n                {lane.max_wip_in_round !== undefined && (\n                    <span className=\"text-xs text-gray-600 block\">Max WIP: {lane.max_wip_in_round}</span>\n                )}\n                {/* Complexity input for \"Schritt A/B/C\" columns (IDs 1, 3, 5) */}\n                {(lane.id === 'lane-1' || lane.id === 'lane-3' || lane.id === 'lane-5') && (\n                    <div className=\"mt-1 flex items-center justify-center gap-1\"> {/* Inline Komplexitt */}\n                        <label className=\"text-gray-700 text-xs font-bold\">K'xitt:</label> {/* Shorter label */}\n                        <input\n                            type=\"number\"\n                            value={complexity[parseInt(lane.id.split('-')[1])] || 1}\n                            onChange={(e) => handleComplexityChange(parseInt(lane.id.split('-')[1]), e.target.value)}\n                            className=\"shadow appearance-none border rounded w-10 py-0 px-0.5 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-xs text-center\"\n                            min=\"1\"\n                        />\n                    </div>\n                )}\n              </div>\n\n              {/* NEW: Card Area (underneath header) */}\n              <div className=\"flex flex-col items-center w-full mt-1 overflow-y-auto\" style={{ maxHeight: 'calc(100% - 70px)' }}> {/* Adjust height to account for header's fixed height */}\n                {lane.cards.map((card, index) => {\n                  const isFlyingClone = flyingAnimations.current.some(anim => anim.card.id === card.id);\n                  return (\n                    <Card\n                      key={card.id}\n                      id={card.id}\n                      text={card.birth_id ? `Karte ${card.birth_id}` : card.id} \n                      laneId={card.col}\n                      index={index}\n                      ref={el => {\n                        if (el) cardRefs.current.set(card.id, el);\n                        else cardRefs.current.delete(card.id);\n                      }}\n                      style={{\n                        visibility: isFlyingClone ? 'hidden' : 'visible',\n                        backgroundColor: card.is_red ? '#ca0633' : '#ffffff',\n                        width: '90px',\n                        height: '30px',\n                        padding: '4px 6px',\n                        fontSize: '0.75rem',\n                        textAlign: 'center',\n                        display: 'flex',\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                        marginBottom: '4px',\n                      }}\n                    />\n                  );\n                })}\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Dashboard Table (More Compact) */}\n      <div className=\"mt-4 p-2 bg-white rounded-lg shadow-md w-full max-w-5xl text-sm\">\n        <h3 className=\"text-xl font-bold text-gray-800 mb-2 border-b pb-1\">Dashboard</h3>\n        {dashboardData.length === 0 ? (\n          <p className=\"text-gray-500 text-xs p-1\">Dashboard ist leer. Simulation starten.</p>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Runde</th>\n                  <th className=\"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">WiP Limit</th>\n                  <th className=\"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Durchlaufzeit (Rot)</th>\n                  <th className=\"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Flusseff.</th>\n                  <th className=\"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">in Arbeit</th>\n                  <th className=\"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Erledigt</th>\n                  <th className=\"px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Durchsatz</th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {dashboardData.slice().reverse().map((entry, index) => (\n                  <tr key={index}>\n                    <td className=\"px-1 py-1 whitespace-nowrap text-xs text-gray-900\">{entry.round}</td>\n                    <td className=\"px-1 py-1 whitespace-nowrap text-xs text-gray-900\">{entry.wip_limit}</td>\n                    <td className=\"px-1 py-1 whitespace-nowrap text-xs text-gray-900\">{entry.red_card_cycle_time}</td>\n                    <td className=\"px-1 py-1 whitespace-nowrap text-xs text-gray-900\">{entry.flow_efficiency}</td>\n                    <td className=\"px-1 py-1 whitespace-nowrap text-xs text-gray-900\">{entry.in_progress}</td>\n                    <td className=\"px-1 py-1 whitespace-nowrap text-xs text-gray-900\">{entry.done}</td>\n                    <td className=\"px-1 py-1 whitespace-nowrap text-xs text-gray-900\">{entry.throughput}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      {/* Render flying animations on top of everything */}\n      {flyingAnimations.current.map(anim => anim.startRect && (\n        <FlyingCardAnimation\n          key={anim.id}\n          card={anim.card}\n          startRect={anim.startRect}\n          endRect={anim.endRect}\n          onAnimationEnd={handleAnimationEnd}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default Board;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}